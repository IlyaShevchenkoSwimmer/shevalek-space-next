{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/alesha/Desktop/shevalek-space-next/app/photos/components/GalleryFilterButton.tsx"],"sourcesContent":["\"use client\";\n\nimport { Dispatch, SetStateAction, useEffect } from \"react\";\nimport { Photo } from \"./Gallery\";\n\ninterface GalleryFilterButtonProps {\n  photos: Photo[];\n  currentFilter: string;\n  setCurrentFilter: Dispatch<SetStateAction<string>>;\n}\nexport default function GalleryFilterButton({\n  photos,\n  currentFilter,\n  setCurrentFilter,\n}: GalleryFilterButtonProps) {\n  const categoriesSet = new Set<string>();\n  const yearsSet = new Set<string>();\n  photos.forEach((photo) => {\n    categoriesSet.add(photo.category);\n    yearsSet.add(photo.dateTime.slice(0, 4));\n  });\n  const categories = Array.from(categoriesSet);\n  const years = Array.from(yearsSet);\n  return (\n    <button\n      onClick={() => {\n        const filters = document.getElementById(\"category-filters\");\n        filters?.classList.toggle(\"hidden\");\n      }}\n      className=\"fixed z-50 top-4 right-6 pt-1 pb-1 pl-5 pr-5 text-amber-50 bg-gray-500 rounded-xl hover:cursor-pointer hover:bg-gray-600 transition-colors duration-500 ease-in-out\"\n    >\n      Фильтры\n      <div\n        id={\"category-filters\"}\n        className=\"absolute top-10 w-[60vw] right-2 bg-gray-500 rounded-2xl hidden\"\n      >\n        <div\n          className=\"flex gap-2 justify-center items-center pt-3 pb-2 pl-4 pr-4 border-b-1 border-b-amber-50 filters\"\n          onClick={() => setCurrentFilter(\"\")}\n        >\n          <div className=\"rounded-full w-2 h-2 bg-amber-50 opacity-0 transition-opacity duration-300 ease-in-out\"></div>\n          Без фильтра\n        </div>\n        <div className=\"flex\">\n          <div className=\"w-[50%] flex flex-col border-r-1 border-r-amber-50\">\n            {categories.map((category) => {\n              if (category === \"Дипломы\") {\n                return;\n              }\n              return (\n                <div\n                  onClick={() => setCurrentFilter(category)}\n                  key={category}\n                  className=\"flex gap-2 justify-center items-center pt-1.5 pb-1.5 pl-15 pr-15 filters\"\n                >\n                  <div className=\"rounded-full w-2 h-2 bg-amber-50 opacity-0 transition-opacity duration-300 ease-in-out\"></div>\n                  {category}\n                </div>\n              );\n            })}\n          </div>\n          <div className=\"w-[50%] flex flex-col border-l-1 border-l-amber-50\">\n            {years.map((year) => {\n              return (\n                <div\n                  onClick={() => setCurrentFilter(year)}\n                  key={year}\n                  className=\"flex gap-2 justify-center items-center pt-1.5 pb-1.5 pl-15 pr-15 filters\"\n                >\n                  <div className=\"rounded-full w-2 h-2 bg-amber-50 opacity-0 transition-opacity duration-300 ease-in-out\"></div>\n                  {year}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    </button>\n  );\n}\n"],"names":[],"mappings":";;;;AAAA;;AAUe,SAAS,oBAAoB,EAC1C,MAAM,EACN,aAAa,EACb,gBAAgB,EACS;IACzB,MAAM,gBAAgB,IAAI;IAC1B,MAAM,WAAW,IAAI;IACrB,OAAO,OAAO,CAAC,CAAC;QACd,cAAc,GAAG,CAAC,MAAM,QAAQ;QAChC,SAAS,GAAG,CAAC,MAAM,QAAQ,CAAC,KAAK,CAAC,GAAG;IACvC;IACA,MAAM,aAAa,MAAM,IAAI,CAAC;IAC9B,MAAM,QAAQ,MAAM,IAAI,CAAC;IACzB,qBACE,6LAAC;QACC,SAAS;YACP,MAAM,UAAU,SAAS,cAAc,CAAC;YACxC,SAAS,UAAU,OAAO;QAC5B;QACA,WAAU;;YACX;0BAEC,6LAAC;gBACC,IAAI;gBACJ,WAAU;;kCAEV,6LAAC;wBACC,WAAU;wBACV,SAAS,IAAM,iBAAiB;;0CAEhC,6LAAC;gCAAI,WAAU;;;;;;4BAA+F;;;;;;;kCAGhH,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCAAI,WAAU;0CACZ,WAAW,GAAG,CAAC,CAAC;oCACf,IAAI,aAAa,WAAW;wCAC1B;oCACF;oCACA,qBACE,6LAAC;wCACC,SAAS,IAAM,iBAAiB;wCAEhC,WAAU;;0DAEV,6LAAC;gDAAI,WAAU;;;;;;4CACd;;uCAJI;;;;;gCAOX;;;;;;0CAEF,6LAAC;gCAAI,WAAU;0CACZ,MAAM,GAAG,CAAC,CAAC;oCACV,qBACE,6LAAC;wCACC,SAAS,IAAM,iBAAiB;wCAEhC,WAAU;;0DAEV,6LAAC;gDAAI,WAAU;;;;;;4CACd;;uCAJI;;;;;gCAOX;;;;;;;;;;;;;;;;;;;;;;;;AAMZ;KArEwB","debugId":null}},
    {"offset": {"line": 143, "column": 0}, "map": {"version":3,"sources":["file:///Users/alesha/Desktop/shevalek-space-next/app/helpers/gridPhotosArray.ts"],"sourcesContent":["import { Photo } from \"../photos/components/Gallery\";\n\nexport function gridPhotosArray(jsonAnswer: Photo[]) {\n  let index = 0;\n  const resultArr = [];\n  const currArr = [];\n  let currArrIndex = 0;\n  while (index < jsonAnswer.length) {\n    currArr.push(jsonAnswer[index]);\n\n    if (index === 0) {\n      index++;\n      currArrIndex++;\n      continue;\n    }\n\n    if (index === jsonAnswer.length - 1) {\n      resultArr.push([...currArr]);\n      currArr.length = 0;\n      currArrIndex = 0;\n      index++;\n      continue;\n    }\n\n    if (\n      currArrIndex > 0 &&\n      jsonAnswer[index].orientation === \"horizontal\" &&\n      currArr[currArrIndex - 1].orientation === \"horizontal\"\n    ) {\n      resultArr.push([...currArr]);\n      currArr.length = 0;\n      currArrIndex = 0;\n      index++;\n      continue;\n    }\n    if (currArr.length === 3) {\n      resultArr.push([...currArr]);\n      currArr.length = 0;\n      currArrIndex = 0;\n      index++;\n      continue;\n    }\n    index++;\n    currArrIndex++;\n  }\n\n  return resultArr;\n}\n"],"names":[],"mappings":";;;AAEO,SAAS,gBAAgB,UAAmB;IACjD,IAAI,QAAQ;IACZ,MAAM,YAAY,EAAE;IACpB,MAAM,UAAU,EAAE;IAClB,IAAI,eAAe;IACnB,MAAO,QAAQ,WAAW,MAAM,CAAE;QAChC,QAAQ,IAAI,CAAC,UAAU,CAAC,MAAM;QAE9B,IAAI,UAAU,GAAG;YACf;YACA;YACA;QACF;QAEA,IAAI,UAAU,WAAW,MAAM,GAAG,GAAG;YACnC,UAAU,IAAI,CAAC;mBAAI;aAAQ;YAC3B,QAAQ,MAAM,GAAG;YACjB,eAAe;YACf;YACA;QACF;QAEA,IACE,eAAe,KACf,UAAU,CAAC,MAAM,CAAC,WAAW,KAAK,gBAClC,OAAO,CAAC,eAAe,EAAE,CAAC,WAAW,KAAK,cAC1C;YACA,UAAU,IAAI,CAAC;mBAAI;aAAQ;YAC3B,QAAQ,MAAM,GAAG;YACjB,eAAe;YACf;YACA;QACF;QACA,IAAI,QAAQ,MAAM,KAAK,GAAG;YACxB,UAAU,IAAI,CAAC;mBAAI;aAAQ;YAC3B,QAAQ,MAAM,GAAG;YACjB,eAAe;YACf;YACA;QACF;QACA;QACA;IACF;IAEA,OAAO;AACT","debugId":null}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///Users/alesha/Desktop/shevalek-space-next/app/photos/components/Gallery.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport Image from \"next/image\";\nimport GalleryFilterButton from \"./GalleryFilterButton\";\nimport { gridPhotosArray } from \"@/app/helpers/gridPhotosArray\";\n\nexport interface Photo {\n  name: string;\n  orientation: string;\n  dateTime: string;\n  category: string;\n}\n\ninterface GalleryVersion {\n  version: string;\n}\n\nexport default function Gallery({ version }: GalleryVersion) {\n  const [photos, setPhotos] = useState<Photo[]>([]);\n  const [currentFilter, setCurrentFilter] = useState<string>(\"\");\n  useEffect(() => {\n    fetch(\"/api/photos/refresh\");\n    fetch(\"/api/photos\")\n      .then((res) => res.json())\n      .then((data) => setPhotos(data));\n  }, []);\n\n  useEffect(() => {\n    const targets = document.querySelectorAll(\"#gallery div\");\n\n    const observer = new IntersectionObserver(\n      (entries) => {\n        entries.forEach((entry) => {\n          if (entry.isIntersecting) {\n            (entry.target as HTMLElement).style.scale = \"1\";\n          }\n\n          if (!entry.isIntersecting) {\n            (entry.target as HTMLElement).style.scale = \"0.3\";\n          }\n        });\n      },\n      { threshold: 0.5 }\n    );\n\n    for (let i = 0; i < targets.length; i++) {\n      observer.observe(targets[i]);\n    }\n  }, [photos, currentFilter]);\n\n  const gridLayout = gridPhotosArray(photos);\n\n  return (\n    <section\n      id=\"gallery\"\n      className=\"relative left-[2vw] w-[96vw] flex flex-wrap justify-center gap-6\"\n    >\n      {version === \"diplomas\" ? (\n        <></>\n      ) : (\n        <GalleryFilterButton\n          photos={photos}\n          currentFilter={currentFilter}\n          setCurrentFilter={setCurrentFilter}\n        />\n      )}\n\n      {photos.map((photo) => {\n        if (photo.category === \"Дипломы\" && version !== \"diplomas\") {\n          return;\n        }\n        if (photo.category !== \"Дипломы\" && version === \"diplomas\") {\n          return;\n        }\n        if (currentFilter !== \"\") {\n          if (\n            photo.category !== currentFilter &&\n            photo.dateTime.slice(0, 4) !== currentFilter\n          ) {\n            return;\n          }\n        }\n        return (\n          <div\n            className=\"h-[40vh] rounded-3xl shadow-2xl transition-all ease-in-out duration-500\"\n            key={photo.name}\n          >\n            <Image\n              width={1000}\n              height={1000}\n              src={\"/photos/\" + photo.name}\n              alt=\"photo\"\n              className=\"w-full h-full object-cover rounded-3xl\"\n            ></Image>\n          </div>\n        );\n      })}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAkBe,SAAS,QAAQ,EAAE,OAAO,EAAkB;;IACzD,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAW,EAAE;IAChD,MAAM,CAAC,eAAe,iBAAiB,GAAG,CAAA,GAAA,6JAAA,CAAA,WAAQ,AAAD,EAAU;IAC3D,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM;YACN,MAAM,eACH,IAAI;qCAAC,CAAC,MAAQ,IAAI,IAAI;oCACtB,IAAI;qCAAC,CAAC,OAAS,UAAU;;QAC9B;4BAAG,EAAE;IAEL,CAAA,GAAA,6JAAA,CAAA,YAAS,AAAD;6BAAE;YACR,MAAM,UAAU,SAAS,gBAAgB,CAAC;YAE1C,MAAM,WAAW,IAAI;qCACnB,CAAC;oBACC,QAAQ,OAAO;6CAAC,CAAC;4BACf,IAAI,MAAM,cAAc,EAAE;gCACvB,MAAM,MAAM,CAAiB,KAAK,CAAC,KAAK,GAAG;4BAC9C;4BAEA,IAAI,CAAC,MAAM,cAAc,EAAE;gCACxB,MAAM,MAAM,CAAiB,KAAK,CAAC,KAAK,GAAG;4BAC9C;wBACF;;gBACF;oCACA;gBAAE,WAAW;YAAI;YAGnB,IAAK,IAAI,IAAI,GAAG,IAAI,QAAQ,MAAM,EAAE,IAAK;gBACvC,SAAS,OAAO,CAAC,OAAO,CAAC,EAAE;YAC7B;QACF;4BAAG;QAAC;QAAQ;KAAc;IAE1B,MAAM,aAAa,CAAA,GAAA,oIAAA,CAAA,kBAAe,AAAD,EAAE;IAEnC,qBACE,6LAAC;QACC,IAAG;QACH,WAAU;;YAET,YAAY,2BACX,2ZAEA,6LAAC,sJAAA,CAAA,UAAmB;gBAClB,QAAQ;gBACR,eAAe;gBACf,kBAAkB;;;;;;YAIrB,OAAO,GAAG,CAAC,CAAC;gBACX,IAAI,MAAM,QAAQ,KAAK,aAAa,YAAY,YAAY;oBAC1D;gBACF;gBACA,IAAI,MAAM,QAAQ,KAAK,aAAa,YAAY,YAAY;oBAC1D;gBACF;gBACA,IAAI,kBAAkB,IAAI;oBACxB,IACE,MAAM,QAAQ,KAAK,iBACnB,MAAM,QAAQ,CAAC,KAAK,CAAC,GAAG,OAAO,eAC/B;wBACA;oBACF;gBACF;gBACA,qBACE,6LAAC;oBACC,WAAU;8BAGV,cAAA,6LAAC,gIAAA,CAAA,UAAK;wBACJ,OAAO;wBACP,QAAQ;wBACR,KAAK,aAAa,MAAM,IAAI;wBAC5B,KAAI;wBACJ,WAAU;;;;;;mBAPP,MAAM,IAAI;;;;;YAWrB;;;;;;;AAGN;GAlFwB;KAAA","debugId":null}}]
}